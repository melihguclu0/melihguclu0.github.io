---
title: Version Control with Git and Github
description: Introduction to Git and GitHub. Linux Keyring Integration.
author: melihguclu
date: 2024-11-24 00:00:00 +0800
categories: [Linux, Commands]
tags: [git, programming, linux, github, keyring, en]
toc: true
lang: en
---

## Introduction

In this post we will 
Bu blog yazısında Linux sistemlerde dosya ve kaynak kodu takibinde sıkça kullanılan **Git Versiyon Kontrol Sistemi** ile yine kullanım kolaylığı ve popülerliği sebebiyle öne çıkan **GitHub Bulut Hosting Hizmetine** kısa bir giriş yapacağız. 


İş akışımız birkaç başlıktan oluşuyor:

1. Kurulum ve Konfigürasyon
2. Repo oluşturma ya da Klonlama
3. Dosya takibi
    - Repodaki dosya üç durumda bulunabilir.
      - Modified: Değiştirilmiş fakat ***katkılanmamış(committed)*** dosya.
      - Staged: Dosya katkılanmak üzere işaretlenmiş. 
      - Committed: Dosya katkılanmış.
4. Katkılanan dosyaların uzak sunucuya yüklenmesi
  
## Installation

Öncelikle kullandığımız Linux dağıtımının paket yöneticisini kullanarak gerekli paketleri yükleyelim.

`sudo pacman -S git ksshaskpass kwallet`

## Configuration

GitHub parolasını her seferinde tekrar girmek zorunda kalmamak için, **Git'i FreeDesktop** destekleyen bir **Keyring** uygulamasına entegre edebiliriz. Bu yazıda **ksshaskpass** ile giriş bilgilerini alıp **KWallet**'a kaydedeceğiz.

`git config --global credential.helper /usr/lib/git-core/git-credential-libsecret`

Bu komut ile FreeDesktop **libsecret** kütüphanesini "credential helper" olarak seçiyoruz.[^ref1]

Şimdi Git'in **ksshaskpass** komutunu bulup çalıştırması için **GIT_ASKPASS** ortam değişkenini ([environment variable](/posts/environment_variables)) tanımlamamız gerekiyor.[^ref2]

```bash
mkdir -p ~/.config/environment.d/
echo "GIT_ASKPASS=/usr/bin/ksshaskpass" >> ~/.config/environment.d/git_askpass.conf
```

Artık GitHub hesabımıza giriş yapıp bir access token oluşturabiliriz.
> Tokenleri güvenli bir yerde sakladığınızdan ve kimseyle paylaşmadığınızdan emin olun.
{: .prompt-warning }


## Usage

Daha önceden oluşturduğumuz herhangi bir repoyu klonlayalım.

``` bash
git clone https://github.com/melihguclu0/test-repo.git
cd test-repo
```

Git dosya takibini **.git/** dizini altında oluşturduğu gizli dosyalar sayesinde yapıyor.

Klonladığımız reponun bu dizini zaten içeriyor olma ihtimali yüksek. Fakat diğer durumda
`git init` komutunu çalıştırarak bir repo başlatabiliriz.


### Branch
Projemizi farklı dallara ayırarak ***main dalını(branch)*** istenmeyen değişikliklerden koruyabiliriz.

***test-branch*** adında yeni bir dal oluşturup ona geçiş yapalım.
```bash
git branch test-branch
git checkout test-branch
```

### Staging

>Eğer uzak sunucudaki dosyalarda değişiklik yapmışsak `git pull` komutu ile onları yerel repoya çekebiliriz.
{: .prompt-info }

Yeni bir dosya ekleyelim.
`echo "# Bu bir markdown başlığı" >> test.md"`

Eğer bu aşamada `git stat` komutunu girersek yeni dosyaların takip edilmediğini belirten bir uyarıyla karşılaşacağız. Bunun sebebi değişikliğe uğrayan dosyaların henüz **Staging** aşamasına eklenmemiş olması. `git add` komutunu kullanmamız gerekiyor.

```bash
git add test.md
```

### Commit
***Katkılama(commit)*** aşamasında dosyaya katkının eklenebilmesi için isim veya email den en az birini girmemiz gerekiyor. 

```bash
git config user.name "melihguclu0"
git config user.email "email"
```
Bu komutlar sadece yerel repoda geçerli olacak. Fakat komutlara `--global` argümanı ekleyerek sistemdeki bütün yerel repolarda geçerli olmasını sağlayabiliriz.

With the following command, lets make our first commit.

`git commit -m "ilk commit!"`

### Merge

In above steps, we created the *test-branch* using `git branch` command and committed some changes. If we wish, we can merge it to the main branch again. But first we must switch to *main* branch and then merge with *test-branch*. 

```bash
git checkout main
git merge test-branch

```
### Push
Now we can upload our repo to GitHub servers with `git push` command.

If we want to keep using test-branch:
`git push --set-upstream origin test-branch`

**ksshashpass** will prompt for login details and then it will save to **KWallet**. After entering GitHub username and then the access token, our changes will be uploaded to the server. While KWallet is open, it will not request password again. 
## References

[^ref1]: <https://wiki.archlinux.org/title/Git#Using_git-credential-libsecret_as_credential-helper>

[^ref2]: <https://wiki.archlinux.org/title/KDE_Wallet#Using_the_KDE_Wallet_to_store_Git_credentials>

- <https://git-scm.com/book/en/v2>


